{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/raffihaycan/cook-app/src/Components/Fiche/ListFiches.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectFiche, fichesSearchSelector } from '../../Store/modules/ficheStore';\nimport { setEditFicheForm } from '../../Store/modules/formStore';\nimport './module.ListFiche.scss';\nimport { sortArrayByIndex } from '../../Utils';\nimport Dialog from '../Alert/Dialog';\nimport FicheCard from './ficheCard';\nimport Pagination from './Pagination';\nimport SwitchCategorie from './SwitchCategorie';\n\nconst ListFiches = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [displayArr, setDisplayArr] = useState([]);\n  const fichesSearch = useSelector(fichesSearchSelector);\n  let copyArr = [...fichesSearch];\n  sortArrayByIndex(copyArr, \"nom\");\n  const [showDialog, setShowDialog] = useState(false);\n  const nbFiches = 4;\n  const nbPages = Math.ceil(copyArr.length / nbFiches);\n  const [currentPage, setCurrentPage] = useState(1);\n  const lastIndex = currentPage * nbFiches;\n  const firstIndex = lastIndex - nbFiches;\n  const currentFiches = copyArr.slice(firstIndex, lastIndex);\n\n  const handleDisplayArray = () => {\n    fichesSearch.length <= nbFiches ? setDisplayArr(copyArr) : setDisplayArr(currentFiches);\n  };\n\n  React.useEffect(() => {\n    handleDisplayArray();\n  }, [fichesSearch, currentPage]);\n\n  const handleIconAction = (action, fiche) => {\n    if (action === \"voir\") {\n      dispatch(selectFiche(fiche));\n      history.push(`fiche/${fiche.ficheId}`);\n    }\n\n    if (action === \"modifier\") {\n      dispatch(setEditFicheForm(fiche));\n      history.push('/formFiche');\n    }\n\n    if (action === \"supprimer\") {\n      setShowDialog(true);\n    }\n  };\n\n  const handleCurrentPage = num => setCurrentPage(num);\n\n  const handleRemoveFiche = () => {\n    console.log(\"test\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rowList\",\n    children: [/*#__PURE__*/_jsxDEV(SwitchCategorie, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outterListFiche\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapListFiche\",\n        children: [showDialog && /*#__PURE__*/_jsxDEV(Dialog, {\n          handleSubmit: handleRemoveFiche,\n          setInitialState: () => setShowDialog(false),\n          close: () => setShowDialog(false),\n          titre: \"Confirmez-vous la suppression ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 36\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: displayArr.map((fiche, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(FicheCard, {\n              handleIconAction: handleIconAction,\n              fiche: fiche\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        nbPages: nbPages,\n        handleCurrentPage: handleCurrentPage,\n        currentPage: currentPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ListFiches, \"3b9SDtmR4KYKAbUuuBOAb3Go2gw=\", false, function () {\n  return [useDispatch, useHistory, useSelector];\n});\n\n_c = ListFiches;\nexport default ListFiches;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListFiches\");","map":{"version":3,"sources":["/Users/raffihaycan/cook-app/src/Components/Fiche/ListFiches.js"],"names":["React","useState","useHistory","useSelector","useDispatch","selectFiche","fichesSearchSelector","setEditFicheForm","sortArrayByIndex","Dialog","FicheCard","Pagination","SwitchCategorie","ListFiches","dispatch","history","displayArr","setDisplayArr","fichesSearch","copyArr","showDialog","setShowDialog","nbFiches","nbPages","Math","ceil","length","currentPage","setCurrentPage","lastIndex","firstIndex","currentFiches","slice","handleDisplayArray","useEffect","handleIconAction","action","fiche","push","ficheId","handleCurrentPage","num","handleRemoveFiche","console","log","map","index"],"mappings":"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","sourcesContent":["import React,{useState} from \"react\"\nimport {useHistory} from 'react-router-dom'\nimport {useSelector,useDispatch} from 'react-redux'\nimport {selectFiche,fichesSearchSelector} from '../../Store/modules/ficheStore'\nimport {setEditFicheForm} from '../../Store/modules/formStore'\nimport './module.ListFiche.scss'\nimport {sortArrayByIndex} from '../../Utils'\nimport Dialog from '../Alert/Dialog'\nimport FicheCard from './ficheCard'\nimport Pagination from './Pagination'\nimport SwitchCategorie from './SwitchCategorie'\n\n\nconst ListFiches = () => {\n\n    const dispatch = useDispatch()\n\n    const history = useHistory()\n\n    const [displayArr,setDisplayArr] = useState([])\n\n    const fichesSearch = useSelector(fichesSearchSelector)\n\n    let copyArr = [...fichesSearch]\n\n    sortArrayByIndex(copyArr,\"nom\")\n\n    const [showDialog,setShowDialog] = useState(false)\n\n    const nbFiches = 4\n\n    const nbPages = Math.ceil(copyArr.length / nbFiches)\n\n    const [currentPage,setCurrentPage] = useState(1)\n\n    const lastIndex = currentPage * nbFiches\n\n    const firstIndex = lastIndex - nbFiches \n\n    const currentFiches = copyArr.slice(firstIndex,lastIndex)\n\n    const handleDisplayArray = () => {\n\n        fichesSearch.length <= nbFiches ? setDisplayArr(copyArr) : setDisplayArr(currentFiches)\n    }\n\n    React.useEffect(() => { \n\n        handleDisplayArray()\n\n    },[fichesSearch,currentPage])\n\n\n    const handleIconAction = (action,fiche) => {\n\n        if(action === \"voir\"){\n\n            dispatch(selectFiche(fiche))\n            history.push(`fiche/${fiche.ficheId}`)\n        }\n\n        if(action === \"modifier\"){\n\n            dispatch(setEditFicheForm(fiche))\n            history.push('/formFiche');\n        }\n\n        if(action === \"supprimer\"){\n\n            setShowDialog(true)\n        }\n    }\n\n    const handleCurrentPage = (num) => setCurrentPage(num)\n\n    const handleRemoveFiche = () => {\n\n        console.log(\"test\")\n    }\n\n\n    return(\n\n        <div className=\"rowList\">\n            <SwitchCategorie/>\n            <div className=\"outterListFiche\">\n                <div className='wrapListFiche'>  \n                    {showDialog && <Dialog handleSubmit={handleRemoveFiche} setInitialState={()=> setShowDialog(false)} close={()=>setShowDialog(false)} titre={\"Confirmez-vous la suppression ?\"}/>} \n                    <ul>\n                    {displayArr.map((fiche,index) =>\n                        <li key={index}>\n                            <FicheCard  handleIconAction={handleIconAction} fiche={fiche}/>\n                        </li>\n                    )}\n                    </ul>\n                </div>\n                <Pagination nbPages={nbPages} handleCurrentPage={handleCurrentPage} currentPage={currentPage}/>\n            </div>\n        </div>\n    )\n}\n\nexport default ListFiches"]},"metadata":{},"sourceType":"module"}